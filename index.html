<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÑ –ù–û–í–û–ì–û–î–ù–ò–ô –í–ó–õ–û–ú üéÑ</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #0a0a0a; color: #00ff00; font-family: 'VT323', monospace; min-height: 100vh; overflow-x: hidden; }
        body::before { content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; background: repeating-linear-gradient(0deg, rgba(0,0,0,0.15), rgba(0,0,0,0.15) 1px, transparent 1px, transparent 2px); z-index: 1000; }
        @keyframes flicker { 0% { opacity: 0.97; } 50% { opacity: 1; } 100% { opacity: 0.98; } }
        body::after { content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; animation: flicker 0.15s infinite; background: radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,0.3) 100%); z-index: 999; }
        .snowflake { position: fixed; color: #fff; font-size: 1rem; top: -20px; animation: snowfall linear infinite; z-index: 998; opacity: 0.7; pointer-events: none; }
        @keyframes snowfall { 0% { transform: translateY(0) rotate(0deg); } 100% { transform: translateY(100vh) rotate(360deg); } }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; position: relative; z-index: 1; }
        .header { text-align: center; padding: 20px 0; border-bottom: 2px dashed #00ff00; margin-bottom: 30px; }
        .header h1 { font-family: 'Press Start 2P', cursive; font-size: 0.9rem; text-shadow: 0 0 10px #00ff00, 0 0 20px #00ff00; animation: glow 2s ease-in-out infinite alternate; }
        @keyframes glow { from { text-shadow: 0 0 10px #00ff00, 0 0 20px #00ff00; } to { text-shadow: 0 0 20px #00ff00, 0 0 40px #00ff00, 0 0 60px #00ff00; } }
        .ascii-art { font-size: 0.5rem; line-height: 1; color: #00aa00; white-space: pre; text-align: center; margin: 20px 0; }
        .terminal { background: rgba(0, 20, 0, 0.8); border: 2px solid #00ff00; border-radius: 5px; padding: 20px; margin: 20px 0; box-shadow: 0 0 20px rgba(0, 255, 0, 0.3), inset 0 0 20px rgba(0, 255, 0, 0.1); }
        .terminal-header { display: flex; gap: 8px; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #00ff0050; }
        .terminal-btn { width: 12px; height: 12px; border-radius: 50%; }
        .btn-red { background: #ff5f56; } .btn-yellow { background: #ffbd2e; } .btn-green { background: #27ca40; }
        .prompt { color: #00ff00; font-size: 1.4rem; }
        .prompt::before { content: "root@–±–∞—Ç—è-—Ö–∞–∫:~$ "; color: #00aa00; }
        .stage { display: none; }
        .stage.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .message { font-size: 1.4rem; line-height: 1.6; margin: 15px 0; }
        .cringe { color: #ff00ff; font-size: 1.6rem; text-shadow: 0 0 10px #ff00ff; }
        .epic { color: #ffff00; font-size: 1.8rem; text-shadow: 0 0 10px #ffff00; animation: rainbow 2s linear infinite; }
        .xmas { color: #ff0000; text-shadow: 0 0 10px #ff0000; }
        .ohio { color: #ff6600; text-shadow: 0 0 10px #ff6600; animation: ohio-shake 0.5s infinite; }
        @keyframes ohio-shake { 0%, 100% { transform: rotate(-1deg); } 50% { transform: rotate(1deg); } }
        @keyframes rainbow { 0% { color: #ff0000; } 16% { color: #ff8800; } 33% { color: #ffff00; } 50% { color: #00ff00; } 66% { color: #0088ff; } 83% { color: #ff00ff; } 100% { color: #ff0000; } }
        input[type="text"] { background: #001100; border: 2px solid #00ff00; color: #00ff00; font-family: 'VT323', monospace; font-size: 1.4rem; padding: 10px 15px; width: 100%; max-width: 300px; outline: none; margin: 10px 0; }
        input[type="text"]:focus { box-shadow: 0 0 15px rgba(0, 255, 0, 0.5); }
        button { background: #00ff00; color: #000; border: none; font-family: 'Press Start 2P', cursive; font-size: 0.6rem; padding: 15px 20px; cursor: pointer; margin: 10px 5px; transition: all 0.3s; }
        button:hover { background: #00aa00; box-shadow: 0 0 20px #00ff00; transform: scale(1.05); }
        .error { color: #ff0000; font-size: 1.4rem; animation: shake 0.5s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
        .success { color: #00ff00; font-size: 1.4rem; }
        .certificate { background: linear-gradient(135deg, #001100 0%, #002200 50%, #001100 100%); border: 4px double #00ff00; padding: 30px; text-align: center; margin: 20px 0; position: relative; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { box-shadow: 0 0 20px rgba(0, 255, 0, 0.3); } 50% { box-shadow: 0 0 40px rgba(0, 255, 0, 0.6); } }
        .certificate::before { content: "üéÑ ‚òÖ ‚òÖ ‚òÖ –°–ï–†–¢–ò–§–ò–ö–ê–¢ ‚òÖ ‚òÖ ‚òÖ üéÑ"; display: block; font-family: 'Press Start 2P', cursive; font-size: 0.5rem; margin-bottom: 20px; color: #ffff00; }
        .certificate-code { font-family: 'Press Start 2P', cursive; font-size: 0.9rem; color: #00ffff; background: #000; padding: 15px; margin: 15px 0; border: 2px solid #00ffff; word-break: break-all; letter-spacing: 2px; }
        .emoji-rain { position: fixed; font-size: 2rem; animation: fall 3s linear forwards; z-index: 100; }
        @keyframes fall { 0% { transform: translateY(-100px) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } }
        .hidden { display: none !important; }
        .hint { color: #888; font-size: 1.1rem; font-style: italic; margin-top: 10px; }
        .meme-text { font-size: 1.8rem; text-transform: uppercase; letter-spacing: 3px; }
        .cipher-text { font-family: 'Press Start 2P', cursive; font-size: 1.1rem; color: #00ffff; background: #000; padding: 15px; margin: 15px 0; border: 2px solid #00ffff; letter-spacing: 3px; }
        .binary-text { font-family: 'VT323', monospace; font-size: 1.5rem; color: #00ff00; background: #000; padding: 15px; margin: 15px 0; border: 2px solid #00ff00; letter-spacing: 2px; }
        .click-target { position: absolute; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: transform 0.05s; border-radius: 50%; animation: virus-float 0.3s ease-in-out infinite; }
        @keyframes virus-float { 0%, 100% { transform: translateY(0) scale(1); } 50% { transform: translateY(-5px) scale(1.05); } }
        .click-target:hover { transform: scale(1.3) !important; filter: brightness(1.5); }
        .game-area { position: relative; width: 100%; height: 400px; background: linear-gradient(180deg, #000 0%, #110011 50%, #001100 100%); border: 3px solid #00ff00; margin: 20px 0; overflow: hidden; }
        .score-display { font-family: 'Press Start 2P', cursive; font-size: 0.8rem; color: #ffff00; margin: 10px 0; }
        .timer-display { font-family: 'Press Start 2P', cursive; font-size: 1.2rem; color: #ff0000; margin: 10px 0; text-shadow: 0 0 10px #ff0000; }
        .timer-critical { animation: timer-blink 0.2s infinite; }
        @keyframes timer-blink { 0%, 100% { opacity: 1; color: #ff0000; } 50% { opacity: 0.5; color: #ff6600; } }
        .stage-indicator { text-align: center; margin-bottom: 20px; font-size: 0.8rem; color: #666; display: flex; flex-wrap: wrap; justify-content: center; gap: 5px; }
        .stage-indicator span { display: inline-block; width: 25px; height: 25px; line-height: 25px; border-radius: 50%; background: #111; border: 2px solid #333; font-size: 0.6rem; }
        .stage-indicator span.completed { background: #00ff00; border-color: #00ff00; color: #000; }
        .stage-indicator span.current { border-color: #00ff00; color: #00ff00; animation: pulse-border 1s infinite; }
        @keyframes pulse-border { 0%, 100% { box-shadow: 0 0 5px #00ff00; } 50% { box-shadow: 0 0 15px #00ff00; } }
        .glitch { animation: glitch 0.3s infinite; }
        @keyframes glitch { 0% { transform: translate(0); } 20% { transform: translate(-2px, 2px); } 40% { transform: translate(-2px, -2px); } 60% { transform: translate(2px, 2px); } 80% { transform: translate(2px, -2px); } 100% { transform: translate(0); } }
        .morse-container { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; margin: 15px 0; }
        .morse-letter { background: #000; border: 2px solid #00ff00; padding: 8px 10px; font-size: 1.2rem; min-width: 45px; text-align: center; }
        .brainrot { background: linear-gradient(90deg, #ff0000, #ff7700, #ffff00, #00ff00, #0077ff, #ff00ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; animation: brainrot-shift 2s linear infinite; background-size: 200% 100%; }
        @keyframes brainrot-shift { 0% { background-position: 0% 50%; } 100% { background-position: 200% 50%; } }
        .screen-shake { animation: screen-shake 0.3s; }
        @keyframes screen-shake { 0%, 100% { transform: translate(0); } 10% { transform: translate(-10px, -10px); } 20% { transform: translate(10px, 10px); } 30% { transform: translate(-10px, 10px); } 40% { transform: translate(10px, -10px); } 50% { transform: translate(-10px, 0); } 60% { transform: translate(10px, 0); } }
        .final-virus { animation: final-virus 0.5s forwards; }
        @keyframes final-virus { 0% { transform: scale(1); } 50% { transform: scale(4) rotate(180deg); } 100% { transform: scale(0) rotate(360deg); opacity: 0; } }
        .skill-issue { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); font-family: 'Press Start 2P', cursive; font-size: 1.2rem; color: #ff0000; text-shadow: 0 0 30px #ff0000; z-index: 9999; animation: skill-issue-anim 0.5s ease-out; background: rgba(0,0,0,0.95); padding: 30px; border: 4px solid #ff0000; text-align: center; }
        @keyframes skill-issue-anim { 0% { transform: translate(-50%, -50%) scale(0); } 50% { transform: translate(-50%, -50%) scale(1.2); } 100% { transform: translate(-50%, -50%) scale(1); } }
        .combo-text { position: fixed; font-family: 'Press Start 2P', cursive; font-size: 0.8rem; color: #ffff00; text-shadow: 0 0 10px #ffff00; animation: combo-float 0.8s ease-out forwards; z-index: 100; pointer-events: none; }
        @keyframes combo-float { 0% { opacity: 1; transform: translateY(0) scale(1); } 100% { opacity: 0; transform: translateY(-60px) scale(1.5); } }
        .progress-bar { width: 100%; height: 20px; background: #111; border: 2px solid #00ff00; margin: 10px 0; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #ff0000, #ff7700, #ffff00, #00ff00); width: 0%; transition: width 0.2s; }
        .emotional-damage { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 2.5rem; z-index: 9999; animation: emotional-damage 1.5s ease-out forwards; text-align: center; background: rgba(0,0,0,0.9); padding: 25px; border: 3px solid #ff0000; font-family: 'Press Start 2P', cursive; color: #ff0000; }
        @keyframes emotional-damage { 0% { opacity: 0; transform: translate(-50%, -50%) scale(0) rotate(-20deg); } 30% { opacity: 1; transform: translate(-50%, -50%) scale(1.3) rotate(10deg); } 100% { opacity: 0; transform: translate(-50%, -50%) scale(2); } }
        .fanum-tax { color: #ff00ff; animation: fanum 0.5s infinite; display: inline-block; }
        @keyframes fanum { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(3px); } }
        .speedrun-timer { position: fixed; top: 10px; right: 10px; font-family: 'Press Start 2P', cursive; font-size: 0.6rem; color: #00ff00; background: rgba(0,0,0,0.9); padding: 8px; border: 1px solid #00ff00; z-index: 1001; }
        .kek { color: #ff69b4; font-size: 2rem; text-shadow: 0 0 15px #ff69b4; }
        .cheburek { background: linear-gradient(45deg, #8B4513, #D2691E, #F4A460); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-size: 2rem; }
        .wave-indicator { font-family: 'Press Start 2P', cursive; font-size: 1.5rem; color: #ff00ff; text-align: center; animation: wave-pulse 0.5s infinite; }
        @keyframes wave-pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

        /* –ù–û–í–´–ï –°–¢–ò–õ–ò –î–õ–Ø –ú–ò–ù–ò-–ò–ì–† */
        .reaction-btn {
            width: 200px; height: 200px; border-radius: 50%; font-size: 1.5rem;
            font-family: 'Press Start 2P', cursive; cursor: pointer; border: 5px solid #000;
            transition: all 0.1s; margin: 20px auto; display: block;
        }
        .reaction-btn.waiting { background: #ff0000; color: #fff; }
        .reaction-btn.ready { background: #00ff00; color: #000; animation: pulse-btn 0.3s infinite; }
        .reaction-btn.early { background: #ff6600; color: #fff; }
        @keyframes pulse-btn { 0%, 100% { transform: scale(1); box-shadow: 0 0 20px #00ff00; } 50% { transform: scale(1.05); box-shadow: 0 0 40px #00ff00; } }

        .reaction-result { font-family: 'Press Start 2P', cursive; font-size: 1rem; text-align: center; margin: 10px 0; }
        .reaction-fast { color: #00ff00; }
        .reaction-slow { color: #ffff00; }
        .reaction-fail { color: #ff0000; }

        .memory-grid { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin: 20px 0; }
        .memory-btn {
            width: 80px; height: 80px; border-radius: 15px; font-size: 2.5rem;
            cursor: pointer; border: 3px solid #333; background: #222;
            transition: all 0.2s; display: flex; align-items: center; justify-content: center;
        }
        .memory-btn:hover { transform: scale(1.1); }
        .memory-btn.flash { animation: memory-flash 0.4s; }
        @keyframes memory-flash { 0%, 100% { transform: scale(1); filter: brightness(1); } 50% { transform: scale(1.2); filter: brightness(2); box-shadow: 0 0 30px currentColor; } }
        .memory-btn.correct { border-color: #00ff00; box-shadow: 0 0 15px #00ff00; }
        .memory-btn.wrong { border-color: #ff0000; animation: shake 0.3s; }
        .memory-btn.btn-red { color: #ff0000; }
        .memory-btn.btn-blue { color: #0088ff; }
        .memory-btn.btn-yellow { color: #ffff00; }
        .memory-btn.btn-green { color: #00ff00; }
        .memory-btn.btn-purple { color: #ff00ff; }

        .baobab { color: #8B4513; font-size: 2rem; text-shadow: 0 0 10px #8B4513; }
        .kuplinov { color: #ff69b4; font-size: 2rem; text-shadow: 0 0 10px #ff69b4; }
    </style>
</head>
<body>
    <div class="speedrun-timer" id="speedrunTimer">
        –°–ü–ò–î–†–ê–ù: <span id="speedrunTime">00:00</span>
    </div>

    <div class="container">
        <div class="header">
            <h1>üéÑ –ë–ê–¢–Ø_–•–ê–ö v6.9.420 üéÑ</h1>
            <div class="ascii-art">
        *
       /|\
      /*|O\
     /*/|\*\
    /X/O|*\X\
   /*/X/|\X\*\
  /O/*/X|*\O\X\
 /*/O/X/|\X\O\*\
    |___|
            </div>
        </div>

        <div class="stage-indicator" id="stageIndicator">
            <span id="ind1">1</span>
            <span id="ind2">2</span>
            <span id="ind3">3</span>
            <span id="ind4">4</span>
            <span id="ind5">5</span>
            <span id="ind6">6</span>
            <span id="ind7">7</span>
            <span id="ind8">8</span>
            <span id="ind9">9</span>
            <span id="ind10">10</span>
        </div>

        <div class="terminal">
            <div class="terminal-header">
                <div class="terminal-btn btn-red"></div>
                <div class="terminal-btn btn-yellow"></div>
                <div class="terminal-btn btn-green"></div>
            </div>

            <!-- STAGE 0: Intro -->
            <div class="stage active" id="stage0">
                <p class="message"><span class="cringe">üê∫ –¢–´ –ó–ê–®–Å–õ –ù–ê –¢–ï–†–†–ò–¢–û–†–ò–Æ –õ–ï–ì–ï–ù–î!!! üê∫</span></p>
                <p class="message">–°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–ª–∞ <span class="epic">–ó–ê–®–ò–§–†–û–í–ê–ù–ù–´–ô –ü–û–î–ê–†–û–ö</span>...</p>
                <p class="message">–¢–æ–ª—å–∫–æ <span class="kek">–ù–ê–°–¢–û–Ø–©–ò–ô –ö–†–ê–°–ê–í–ß–ò–ö</span> –º–æ–∂–µ—Ç –ø—Ä–æ–π—Ç–∏ <span class="xmas">10 –ò–°–ü–´–¢–ê–ù–ò–ô</span>! üîê</p>
                <p class="message" style="font-size: 2rem;">–í–≤–µ–¥–∏ —Å–≤–æ–π <span class="brainrot">–õ–ï–ì–ï–ù–î–ê–†–ù–´–ô –ù–ò–ö</span>:</p>
                <p class="message hint">(–ü–æ–¥—Å–∫–∞–∑–∫–∞: –∫—Ç–æ —Ç—É—Ç –≥–ª–∞–≤–Ω—ã–π –±–∞—Ç—è...)</p>
                <div class="prompt"><input type="text" id="nameInput" placeholder="–¢–≤–æ–π –Ω–∏–∫..."></div>
                <button onclick="checkNick()">[ –í–û–ô–¢–ò –ö–ê–ö –õ–ï–ì–ï–ù–î–ê ]</button>
                <p id="nameError" class="error hidden"></p>
            </div>

            <!-- STAGE 1: Salad cipher -->
            <div class="stage" id="stage1">
                <p class="message"><span class="success">‚úÖ –ù–ò–ö –ü–û–î–¢–í–ï–†–ñ–î–Å–ù</span></p>
                <p class="message">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span class="epic" id="playerName"></span>! üóø</p>
                <p class="message"><span class="cringe">–£–†–û–í–ï–ù–¨ 1: ü•ó –®–ò–§–† –°–ê–õ–ê–¢–ê ü•ó</span></p>
                <p class="message">–†–∞—Å—à–∏—Ñ—Ä—É–π –ø–æ—Å–ª–∞–Ω–∏–µ! –û–Ω–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ <span class="ohio">"–®–ò–§–†–û–ú –°–ê–õ–ê–¢–ê"</span>...</p>
                <div class="cipher-text">–ù–£–õ–¢–•–£</div>
                <p class="message hint">–ü–æ–≥—É–≥–ª–∏ —á—Ç–æ –∑–∞ —à–∏—Ñ—Ä... üîç</p>
                <div class="prompt"><input type="text" id="answer1" placeholder="–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞..."></div>
                <button onclick="checkAnswer(1)">[ –†–ê–°–®–ò–§–†–û–í–ê–¢–¨ ]</button>
                <p id="error1" class="error hidden"></p>
            </div>

            <!-- STAGE 2: –õ–û–õ –ö–ï–ö –ß–ï–ë–£–†–ï–ö -->
            <div class="stage" id="stage2">
                <p class="message"><span class="success">‚úÖ –®–ò–§–† –í–ó–õ–û–ú–ê–ù!</span></p>
                <p class="message"><span class="cringe">–£–†–û–í–ï–ù–¨ 2: –¢–ï–°–¢ –ù–ê –û–õ–î–§–ê–ì–ê üë¥</span></p>
                <div class="ascii-art" style="color: #ff69b4; font-size: 1.5rem;">( Õ°¬∞ Õú ñ Õ°¬∞)</div>
                <p class="message">–ó–∞–∫–æ–Ω—á–∏ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—É—é —Ñ—Ä–∞–∑—É:</p>
                <p class="message" style="font-size: 2.5rem;"><span class="cheburek">"–õ–û–õ –ö–ï–ö ___"</span></p>
                <p class="message">(—Ä—É—Å—Å–∫–∏–º–∏ –±—É–∫–≤–∞–º–∏)</p>
                <div class="prompt"><input type="text" id="answer2" placeholder="–û—Ç–≤–µ—Ç..."></div>
                <button onclick="checkAnswer(2)">[ –û–¢–í–ï–¢–ò–¢–¨ ]</button>
                <p id="error2" class="error hidden"></p>
            </div>

            <!-- STAGE 3: Morse code - PISOS -->
            <div class="stage" id="stage3">
                <p class="message"><span class="success">‚úÖ –û–õ–î–§–ê–ì –ü–û–î–¢–í–ï–†–ñ–î–Å–ù! üë¥</span></p>
                <p class="message"><span class="cringe">–£–†–û–í–ï–ù–¨ 3: –ê–ó–ë–£–ö–ê –ú–û–†–ó–ï üì°</span></p>
                <p class="message">–î–µ–¥ –ú–æ—Ä–æ–∑ –ø–µ—Ä–µ–¥–∞—ë—Ç –°–ï–ö–†–ï–¢–ù–û–ï –ø–æ—Å–ª–∞–Ω–∏–µ:</p>
                <div class="morse-container">
                    <div class="morse-letter">‚Ä¢‚àí‚àí‚Ä¢</div>
                    <div class="morse-letter">‚Ä¢‚Ä¢</div>
                    <div class="morse-letter">‚Ä¢‚Ä¢‚Ä¢</div>
                    <div class="morse-letter">‚àí‚àí‚àí</div>
                    <div class="morse-letter">‚Ä¢‚Ä¢‚Ä¢</div>
                </div>
                <p class="message hint">–ü–æ–≥—É–≥–ª–∏ —Ç–∞–±–ª–∏—Ü—É –ú–æ—Ä–∑–µ! üîç</p>
                <p class="message">(5 –±—É–∫–≤ –ª–∞—Ç–∏–Ω–∏—Ü–µ–π)</p>
                <div class="prompt"><input type="text" id="answer3" placeholder="5 –±—É–∫–≤..." maxlength="5" style="text-transform: uppercase;"></div>
                <button onclick="checkAnswer(3)">[ –î–ï–ö–û–î–ò–†–û–í–ê–¢–¨ ]</button>
                <p id="error3" class="error hidden"></p>
            </div>

            <!-- STAGE 4: –ú–ò–ù–ò-–ò–ì–†–ê –†–ï–ê–ö–¶–ò–Ø -->
            <div class="stage" id="stage4">
                <p class="message"><span class="success">‚úÖ –ö–ï–ö–í! üê∏</span></p>
                <p class="message"><span class="cringe">–£–†–û–í–ï–ù–¨ 4: üéØ –¢–ï–°–¢ –ù–ê –†–ï–§–õ–ï–ö–°–´ üéØ</span></p>
                <p class="message">–ñ–¥–∏ –ø–æ–∫–∞ –∫–Ω–æ–ø–∫–∞ —Å—Ç–∞–Ω–µ—Ç <span class="epic">–ó–ï–õ–Å–ù–û–ô</span> –∏ –∂–º–∞–∫–∞–π!</p>
                <p class="message">–ù—É–∂–Ω–æ <span class="xmas">3 –£–°–ü–ï–®–ù–´–•</span> –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥—Ä—è–¥!</p>
                <p class="message hint">–ù–∞–∂–º—ë—à—å —Ä–∞–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ = –°–õ–ò–í! üíÄ</p>
                <div class="score-display">–£–°–ü–ï–•–û–í: <span id="reactionScore">0</span>/3 | –†–ï–ö–û–†–î: <span id="reactionBest">---</span> –º—Å</div>
                <button class="reaction-btn waiting" id="reactionBtn" onclick="handleReaction()">–ñ–î–ò...</button>
                <p class="reaction-result" id="reactionResult"></p>
                <button onclick="startReaction()" id="startReactionBtn">[ –ù–ê–ß–ê–¢–¨ –¢–ï–°–¢ ]</button>
            </div>

            <!-- STAGE 5: HARDCORE Virus Game -->
            <div class="stage" id="stage5">
                <p class="message"><span class="success">‚úÖ –†–ï–§–õ–ï–ö–°–´ –ö–ê–ö –£ –ö–û–¢–ê! üê±</span></p>
                <p class="message"><span class="cringe">–£–†–û–í–ï–ù–¨ 5: –•–ê–†–î–ö–û–† –†–ï–ñ–ò–ú!!! üíÄüî•</span></p>
                <p class="message">–í —Å–∏—Å—Ç–µ–º—É –≤–æ—Ä–≤–∞–ª–∏—Å—å <span class="fanum-tax">–ö–†–ò–ù–ñ-–í–ò–†–£–°–´</span>!</p>
                <p class="message">–£–Ω–∏—á—Ç–æ–∂—å <span class="epic">20 –í–ò–†–£–°–û–í</span> –∑–∞ <span class="xmas">18 –°–ï–ö–£–ù–î</span>!</p>
                <p class="message" style="color: #ff0000;">‚ö†Ô∏è –í–ò–†–£–°–´ –ë–´–°–¢–†–´–ï –ò –•–ò–¢–†–´–ï! ‚ö†Ô∏è</p>
                <div class="timer-display">‚è±Ô∏è <span id="gameTimer">18.0</span></div>
                <div class="score-display">üíÄ <span id="virusCount">0</span>/20 | –ö–û–ú–ë–û: <span id="comboCount">x1</span> | –í–û–õ–ù–ê: <span id="waveNum">1</span></div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
                <div class="game-area" id="gameArea"></div>
                <button onclick="startGame()" id="startGameBtn">[ –ù–ê–ß–ê–¢–¨ –•–ê–†–î–ö–û–† ]</button>
                <p class="hint">–í–∏—Ä—É—Å—ã –∏—Å—á–µ–∑–∞—é—Ç –ë–´–°–¢–†–û! –ë—É–¥—å –≥–æ—Ç–æ–≤! üòà</p>
            </div>

            <!-- STAGE 6: –ú–ò–ù–ò-–ò–ì–†–ê –ü–ê–ú–Ø–¢–¨ -->
            <div class="stage" id="stage6">
                <p class="message"><span class="success">‚úÖ –í–ò–†–£–°–´ –£–ù–ò–ß–¢–û–ñ–ï–ù–´! üõ°Ô∏è</span></p>
                <p class="message"><span class="cringe">–£–†–û–í–ï–ù–¨ 6: üß† –¢–ï–°–¢ –ù–ê –ü–ê–ú–Ø–¢–¨ üß†</span></p>
                <p class="message">–ó–∞–ø–æ–º–Ω–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä–∏!</p>
                <p class="message">–ü—Ä–æ–π–¥–∏ <span class="epic">3 –†–ê–£–ù–î–ê</span>!</p>
                <div class="score-display">–†–ê–£–ù–î: <span id="memoryRound">1</span>/3 | –î–õ–ò–ù–ê: <span id="sequenceLen">4</span></div>
                <div class="memory-grid" id="memoryGrid">
                    <button class="memory-btn btn-red" data-color="0">üî¥</button>
                    <button class="memory-btn btn-blue" data-color="1">üîµ</button>
                    <button class="memory-btn btn-yellow" data-color="2">üü°</button>
                    <button class="memory-btn btn-green" data-color="3">üü¢</button>
                    <button class="memory-btn btn-purple" data-color="4">üü£</button>
                </div>
                <p class="reaction-result" id="memoryResult"></p>
                <button onclick="startMemory()" id="startMemoryBtn">[ –ù–ê–ß–ê–¢–¨ ]</button>
                <p class="hint">–°–º–æ—Ç—Ä–∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ! üëÄ</p>
            </div>

            <!-- STAGE 7: –ë–ê–ó–ê -->
            <div class="stage" id="stage7">
                <p class="message"><span class="success">‚úÖ –ü–ê–ú–Ø–¢–¨ –ö–ê–ö –£ –°–õ–û–ù–ê! üêò</span></p>
                <p class="message"><span class="cringe">–£–†–û–í–ï–ù–¨ 7: –ò–ù–¢–ï–†–ù–ï–¢ –ú–£–î–†–û–°–¢–¨ üóø</span></p>
                <div class="ascii-art" style="color: #00ff00; font-size: 0.8rem;">
    ‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°ø‚†ø‚†õ‚†õ‚†õ‚†ã‚†â‚†à‚†â‚†â‚†â‚†â‚†õ‚†ª‚¢ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø
    ‚£ø‚£ø‚£ø‚£ø‚£ø‚°ø‚†ã‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†â‚†õ‚¢ø‚£ø‚£ø‚£ø‚£ø
    ‚£ø‚£ø‚£ø‚£ø‚°è‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£Ä‚£§‚£§‚£§‚£Ñ‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ô‚¢ø‚£ø‚£ø
    ‚£ø‚£ø‚£ø‚¢è‚£¥‚£ø‚£∑‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢æ‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚£ø‚£ø
                </div>
                <p class="message">–ö–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –Ω–µ–æ—Å–ø–æ—Ä–∏–º—É—é –ø—Ä–∞–≤–¥—É...</p>
                <p class="message meme-text" style="font-size: 2rem;">–í—Å–µ –ø–∏—à—É—Ç: <span class="brainrot">"–≠–¢–û ___"</span></p>
                <p class="message">(—Ä—É—Å—Å–∫–∏–º–∏ –±—É–∫–≤–∞–º–∏)</p>
                <div class="prompt"><input type="text" id="answer7" placeholder="–û—Ç–≤–µ—Ç..."></div>
                <button onclick="checkAnswer(7)">[ –û–¢–í–ï–¢–ò–¢–¨ ]</button>
                <p id="error7" class="error hidden"></p>
            </div>

            <!-- STAGE 8: –ò–í–ê–ù –ó–û–õ–û - –ë–ê–û–ë–ê–ë -->
            <div class="stage" id="stage8">
                <p class="message"><span class="success">‚úÖ –û–°–ù–û–í–ê–ù–û! üóø</span></p>
                <p class="message"><span class="cringe">–£–†–û–í–ï–ù–¨ 8: üéµ –Æ–¢–£–ë –õ–ï–ì–ï–ù–î–´ üéµ</span></p>
                <div class="ascii-art" style="color: #8B4513; font-size: 1rem;">
    üå≥üå≥üå≥
     \|/
      |
     /|\
    </div>
                <p class="message">–ò–≤–∞–Ω –ó–æ–ª–æ –ø–æ—ë—Ç –ø–µ—Å–Ω—é –ø—Ä–æ –¥–µ—Ä–µ–≤–æ...</p>
                <p class="message" style="font-size: 2rem;"><span class="baobab">"–ù–ê ___ –°–ù–û–í–ê –ù–ï–¢ –ò–ù–¢–ï–†–ù–ï–¢–ê"</span></p>
                <p class="message">(—Ä—É—Å—Å–∫–∏–º–∏ –±—É–∫–≤–∞–º–∏, –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–µ—Ä–µ–≤–∞)</p>
                <div class="prompt"><input type="text" id="answer8" placeholder="–û—Ç–≤–µ—Ç..."></div>
                <button onclick="checkAnswer(8)">[ –û–¢–í–ï–¢–ò–¢–¨ ]</button>
                <p id="error8" class="error hidden"></p>
            </div>

            <!-- STAGE 9: –ö–£–ü–õ–ò–ù–û–í -->
            <div class="stage" id="stage9">
                <p class="message"><span class="success">‚úÖ –ë–ê–û–ë–ê–ë –û–î–û–ë–†–Ø–ï–¢! üå≥</span></p>
                <p class="message"><span class="cringe">–£–†–û–í–ï–ù–¨ 9: üéÆ –ï–©–Å –û–î–ò–ù –Æ–¢–£–ë–ï–† üéÆ</span></p>
                <div class="ascii-art" style="color: #ff69b4; font-size: 1.5rem;">
    ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
    ‚ïë  (‚óï‚Äø‚óï) –ö–£–ü–õ–ò–ù–û–í  ‚ïë
    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
                </div>
                <p class="message">–ó–Ω–∞–º–µ–Ω–∏—Ç–∞—è —Ñ—Ä–∞–∑–∞ –ö—É–ø–ª–∏–Ω–æ–≤–∞:</p>
                <p class="message" style="font-size: 2rem;"><span class="kuplinov">"–û–• –Å–®–ö–ò ___"</span></p>
                <p class="message">(—Ä—É—Å—Å–∫–∏–º–∏ –±—É–∫–≤–∞–º–∏)</p>
                <div class="prompt"><input type="text" id="answer9" placeholder="–û—Ç–≤–µ—Ç..."></div>
                <button onclick="checkAnswer(9)">[ –û–¢–í–ï–¢–ò–¢–¨ ]</button>
                <p id="error9" class="error hidden"></p>
            </div>

            <!-- STAGE 10: Final binary - 69 -->
            <div class="stage" id="stage10">
                <p class="message"><span class="success">‚úÖ –í–û–†–û–ë–´–®–ö–ò –ü–†–ò–õ–ï–¢–ï–õ–ò! üê¶</span></p>
                <p class="message"><span class="cringe">–£–†–û–í–ï–ù–¨ 10: –§–ò–ù–ê–õ–¨–ù–´–ô –í–ó–õ–û–ú üíª</span></p>
                <p class="message">–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä—É–±–µ–∂! –ú–∞—Ç—Ä–∏—Ü–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–¥...</p>
                <div class="binary-text" style="font-size: 2rem;">00110110 00111001</div>
                <p class="message hint">–ë–∏–Ω–∞—Ä–Ω—ã–π ASCII –∫–æ–¥. –ü–æ–≥—É–≥–ª–∏ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä! üî¢</p>
                <p class="message">–ö–∞–∫–∏–µ –¥–≤–∞ —Å–∏–º–≤–æ–ª–∞?</p>
                <div class="prompt"><input type="text" id="answer10" placeholder="–î–≤–∞ —Å–∏–º–≤–æ–ª–∞..." maxlength="2"></div>
                <button onclick="checkAnswer(10)">[ –§–ò–ù–ê–õ–¨–ù–´–ô –í–ó–õ–û–ú ]</button>
                <p id="error10" class="error hidden"></p>
            </div>

            <!-- STAGE 11: Victory -->
            <div class="stage" id="stage11">
                <div class="ascii-art" style="font-size: 0.25rem; color: #ffff00;">
‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó
‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïî‚ïù    ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïë
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë
‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïî‚ïê‚ñà‚ñà‚ïó     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë‚ïö‚ïê‚ïù
‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïó
‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù
                </div>
                <p class="message"><span class="epic glitch">üéÑüéâ –° –ù–û–í–´–ú –ì–û–î–û–ú, –û–õ–ï–ì!!! üéâüéÑ</span></p>
                <p class="message">–¢–´ –û–§–ò–¶–ò–ê–õ–¨–ù–û <span class="cringe">–•–ê–ö–ï–†-–õ–ï–ì–ï–ù–î–ê üóøüíÄüî•</span></p>
                <p class="message" style="font-size: 1.4rem;"><span class="brainrot">+9999 –ö –ê–£–†–ï | –≠–¢–û –ë–ê–ó–ê | –ö–†–ê–°–ê–í–ß–ò–ö</span></p>
                <p class="message">–°–ø–∏–¥—Ä–∞–Ω: <span class="epic" id="finalTime">00:00</span></p>
                <div class="certificate">
                    <p style="font-size: 1.2rem; margin-bottom: 15px;">üéÅ –°–ï–†–¢–ò–§–ò–ö–ê–¢ –õ–ï–ì–ï–ù–î–´ üéÅ</p>
                    <div class="certificate-code" id="certificateCode"></div>
                    <p style="font-size: 1rem; color: #00ff00; margin-top: 15px;">Wildberries –∂–¥—ë—Ç —Ç–µ–±—è! üõí</p>
                </div>
                <p class="message cringe">–õ–û–õ –ö–ï–ö –ß–ï–ë–£–†–ï–ö! ü•ü</p>
                <p class="message" style="font-size: 1rem; color: #888;">
                    –ù–∞ –±–∞–æ–±–∞–±–µ —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç! üå≥<br>
                    –û—Ö —ë—à–∫–∏ –≤–æ—Ä–æ–±—ã—à–∫–∏, —Ç—ã —ç—Ç–æ —Å–¥–µ–ª–∞–ª!<br>
                    –°—á–∞—Å—Ç–ª–∏–≤–æ–≥–æ –ù–æ–≤–æ–≥–æ –ì–æ–¥–∞! üéÜ
                </p>
            </div>
        </div>
    </div>

    <script>
    (function(){
        const answers = {
            nick: ['olegbatia','oleg batia','oleg_batia','–æ–ª–µ–≥–±–∞—Ç—è','olegbatya','–æ–ª–µ–≥ –±–∞—Ç—è'],
            1: ['–∫—Ä–∏–ø–µ—Ä'],
            2: ['—á–µ–±—É—Ä–µ–∫'],
            3: ['pisos'],
            7: ['–±–∞–∑–∞','–æ—Å–Ω–æ–≤–∞'],
            8: ['–±–∞–æ–±–∞–±–µ','–±–∞–æ–±–∞–±'],
            9: ['–≤–æ—Ä–æ–±—ã—à–∫–∏','–≤–æ—Ä–æ–±—É—à–∫–∏'],
            10: ['69']
        };

        const errors = {
            nick: ['ü§î –ö–¢–û –¢–£–¢ –ë–ê–¢–Ø?! üò§','‚ùå –ö—Ä–∏–≤—ã–µ —Ä—É–∫–∏!','üö´ –ù—É–±–æ–≤ –Ω–µ –ø—É—Å–∫–∞–µ–º!','üíÄ –°–õ–ò–í!','üòÇ –ü–æ–¥—É–º–∞–π –µ—â—ë!'],
            1: '‚ùå –ì—É–≥–ª–∏ —à–∏—Ñ—Ä —Å–∞–ª–∞—Ç–∞! ü•ó',
            2: '‚ùå –ö–ª–∞—Å—Å–∏–∫–∞ —Ä—É–Ω–µ—Ç–∞! –õ–û–õ –ö–ï–ö... ü§î',
            3: '‚ùå –ü–æ–≥—É–≥–ª–∏ –∞–∑–±—É–∫—É –ú–æ—Ä–∑–µ!',
            7: '‚ùå –ö–æ–≥–¥–∞ –≤—Å–µ —Å–æ–≥–ª–∞—Å–Ω—ã... üóø',
            8: '‚ùå –ü–æ–≥—É–≥–ª–∏ –ø–µ—Å–Ω—é –ò–≤–∞–Ω–∞ –ó–æ–ª–æ! üå≥',
            9: '‚ùå –û—Ö —ë—à–∫–∏... –∫—Ç–æ? üê¶',
            10: '‚ùå –ë–∏–Ω–∞—Ä–Ω—ã–π –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –≤ –ø–æ–º–æ—â—å!'
        };

        const certKey = 's4nt4h4ck2025ny';
        const certData = [36,21,69,30,22,19,17,31,95,47,47,46,108,47,47,47,47,108,47,47];

        let stage = 0, nickAttempts = 0;
        let gameActive = false, virusCount = 0, combo = 1, lastKill = 0, wave = 1;
        let gameTimer = null, timeLeft = 18;
        let speedrunStart = null, speedrunInterval = null;

        // –†–µ–∞–∫—Ü–∏—è –º–∏–Ω–∏-–∏–≥—Ä–∞
        let reactionState = 'idle'; // idle, waiting, ready, early
        let reactionTimeout = null;
        let reactionStartTime = 0;
        let reactionScore = 0;
        let reactionBest = Infinity;

        // –ü–∞–º—è—Ç—å –º–∏–Ω–∏-–∏–≥—Ä–∞
        let memorySequence = [];
        let memoryInput = [];
        let memoryRound = 1;
        let memoryPlaying = false;
        let memoryShowingSequence = false;

        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function beep(f=440,d=0.1,t='square'){
            const o=audioCtx.createOscillator(),g=audioCtx.createGain();
            o.connect(g);g.connect(audioCtx.destination);
            o.frequency.value=f;o.type=t;
            g.gain.setValueAtTime(0.3,audioCtx.currentTime);
            g.gain.exponentialRampToValueAtTime(0.01,audioCtx.currentTime+d);
            o.start();o.stop(audioCtx.currentTime+d);
        }

        function playSuccess(){beep(80,0.3,'sawtooth');setTimeout(()=>beep(60,0.2,'sawtooth'),50);}
        function playFail(){beep(150,0.1,'square');setTimeout(()=>beep(100,0.2,'square'),100);}
        function playKill(){beep(800+Math.random()*400,0.05,'sine');}
        function playCombo(){beep(600,0.1,'sine');setTimeout(()=>beep(900,0.1,'sine'),50);}
        function playWin(){[523,659,784,1047].forEach((f,i)=>setTimeout(()=>beep(f,0.2,'sine'),i*150));}
        function playGameOver(){beep(200,0.3,'sawtooth');setTimeout(()=>beep(100,0.5,'sawtooth'),200);}
        function playMemoryTone(n){beep([262,330,392,523,659][n],0.3,'sine');}

        function startSpeedrun(){
            if(speedrunStart)return;
            speedrunStart=Date.now();
            speedrunInterval=setInterval(()=>{
                const e=Date.now()-speedrunStart;
                document.getElementById('speedrunTime').textContent=
                    `${Math.floor(e/60000).toString().padStart(2,'0')}:${Math.floor((e%60000)/1000).toString().padStart(2,'0')}`;
            },100);
        }

        function stopSpeedrun(){
            clearInterval(speedrunInterval);
            return document.getElementById('speedrunTime').textContent;
        }

        // –°–Ω–µ–∂–∏–Ω–∫–∏
        for(let i=0;i<25;i++){
            const s=document.createElement('div');
            s.className='snowflake';
            s.textContent=['‚ùÑ','‚ùÖ','‚ùÜ','‚ú¶','üóø'][Math.floor(Math.random()*5)];
            s.style.left=Math.random()*100+'vw';
            s.style.animationDuration=(5+Math.random()*10)+'s';
            s.style.animationDelay=Math.random()*5+'s';
            document.body.appendChild(s);
        }

        function updateIndicators(){
            for(let i=1;i<=10;i++){
                const ind=document.getElementById('ind'+i);
                ind.classList.remove('completed','current');
                if(i<stage)ind.classList.add('completed');
                else if(i===stage)ind.classList.add('current');
            }
        }

        function goToStage(n){
            document.querySelectorAll('.stage').forEach(s=>s.classList.remove('active'));
            document.getElementById('stage'+n).classList.add('active');
            stage=n;
            updateIndicators();
        }

        function shake(){
            document.body.classList.add('screen-shake');
            setTimeout(()=>document.body.classList.remove('screen-shake'),300);
        }

        function showText(x,y,text){
            const el=document.createElement('div');
            el.className='combo-text';
            el.textContent=text;
            el.style.left=x+'px';
            el.style.top=y+'px';
            document.body.appendChild(el);
            setTimeout(()=>el.remove(),800);
        }

        function showBigText(text){
            const el=document.createElement('div');
            el.className='emotional-damage';
            el.innerHTML=text;
            document.body.appendChild(el);
            setTimeout(()=>el.remove(),1500);
        }

        function rain(emojis){
            for(let i=0;i<15;i++){
                setTimeout(()=>{
                    const e=document.createElement('div');
                    e.className='emoji-rain';
                    e.textContent=emojis[Math.floor(Math.random()*emojis.length)];
                    e.style.left=Math.random()*100+'vw';
                    document.body.appendChild(e);
                    setTimeout(()=>e.remove(),3500);
                },i*60);
            }
        }

        window.checkNick=async function(){
            const input=document.getElementById('nameInput').value.trim().toLowerCase().replace(/\s+/g,'');
            const err=document.getElementById('nameError');
            if(!input){err.textContent='‚ùå –í–≤–µ–¥–∏ –Ω–∏–∫!';err.classList.remove('hidden');return;}

            if(answers.nick.some(a=>a.replace(/\s+/g,'')===input)){
                document.getElementById('playerName').textContent='–û–õ–ï–ì –ë–ê–¢–Ø üëë';
                goToStage(1);
                startSpeedrun();
                rain(['üéÑ','‚ùÑÔ∏è','üéÖ','‚≠ê','üëë','üóø']);
                playSuccess();
            }else{
                nickAttempts++;
                err.textContent=errors.nick[Math.min(nickAttempts-1,4)];
                err.classList.remove('hidden');
                shake();playFail();
                if(nickAttempts>=3)showBigText('üíÄ –ö–†–ò–ù–ñ üíÄ');
            }
        };

        window.checkAnswer=function(s){
            const input=document.getElementById('answer'+s).value.trim().toLowerCase();
            const err=document.getElementById('error'+s);

            if(answers[s].includes(input)){
                playSuccess();
                showText(window.innerWidth/2,window.innerHeight/2,['–ì–ì!','–ë–ê–ó–ê!','–ö–†–ê–°–ê–í–ê!','–¢–û–ü–ß–ò–ö!','–û–†–£!'][Math.floor(Math.random()*5)]);

                if(s===10){
                    goToStage(11);
                    document.getElementById('certificateCode').textContent=certData.map((c,i)=>String.fromCharCode(c^certKey.charCodeAt(i%certKey.length))).join('');
                    document.getElementById('finalTime').textContent=stopSpeedrun();
                    playWin();
                    rain(['üéâ','üéÑ','üéÅ','üèÜ','üî•','üéÖ','‚≠ê','üóø','üëë']);
                    setTimeout(()=>rain(['üéâ','üéÜ','üéÑ','üí∞']),1000);
                }else{
                    // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å
                    goToStage(s + 1);
                    rain(['‚úÖ','‚≠ê','üóø']);
                }
            }else{
                err.textContent=errors[s];
                err.classList.remove('hidden');
                shake();playFail();
                setTimeout(()=>err.classList.add('hidden'),3000);
            }
        };

        // ========== –ú–ò–ù–ò-–ò–ì–†–ê –†–ï–ê–ö–¶–ò–Ø ==========
        window.startReaction = function(){
            audioCtx.resume();
            document.getElementById('startReactionBtn').classList.add('hidden');
            reactionScore = 0;
            reactionBest = Infinity;
            document.getElementById('reactionScore').textContent = '0';
            document.getElementById('reactionBest').textContent = '---';
            startReactionRound();
        };

        function startReactionRound(){
            const btn = document.getElementById('reactionBtn');
            const result = document.getElementById('reactionResult');

            btn.className = 'reaction-btn waiting';
            btn.textContent = '–ñ–î–ò...';
            result.textContent = '';
            reactionState = 'waiting';

            // –°–ª—É—á–∞–π–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ 1.5-4 —Å–µ–∫—É–Ω–¥—ã
            const delay = 1500 + Math.random() * 2500;
            reactionTimeout = setTimeout(()=>{
                if(reactionState === 'waiting'){
                    reactionState = 'ready';
                    reactionStartTime = Date.now();
                    btn.className = 'reaction-btn ready';
                    btn.textContent = '–ñ–ú–ê–ö–ê–ô!';
                    beep(800, 0.1, 'sine');

                    // –¢–∞–π–º–∞—É—Ç –Ω–∞ —Å–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω—É—é —Ä–µ–∞–∫—Ü–∏—é
                    reactionTimeout = setTimeout(()=>{
                        if(reactionState === 'ready'){
                            reactionState = 'idle';
                            btn.className = 'reaction-btn waiting';
                            btn.textContent = '–°–õ–ò–®–ö–û–ú –ú–ï–î–õ–ï–ù–ù–û!';
                            result.textContent = 'üíÄ –í–†–ï–ú–Ø –í–´–®–õ–û! –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–Ω–æ–≤–æ...';
                            result.className = 'reaction-result reaction-fail';
                            reactionScore = 0;
                            document.getElementById('reactionScore').textContent = '0';
                            playFail(); shake();
                            setTimeout(startReactionRound, 2000);
                        }
                    }, 1000);
                }
            }, delay);
        }

        window.handleReaction = function(){
            const btn = document.getElementById('reactionBtn');
            const result = document.getElementById('reactionResult');

            if(reactionState === 'waiting'){
                // –ù–∞–∂–∞–ª–∏ —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ!
                clearTimeout(reactionTimeout);
                reactionState = 'idle';
                btn.className = 'reaction-btn early';
                btn.textContent = '–†–ê–ù–û!';
                result.textContent = 'üíÄ –°–õ–ò–í! –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–Ω–æ–≤–æ...';
                result.className = 'reaction-result reaction-fail';
                reactionScore = 0;
                document.getElementById('reactionScore').textContent = '0';
                playFail(); shake();
                showBigText('üíÄ –°–õ–ò–í üíÄ');
                setTimeout(startReactionRound, 2000);
            }
            else if(reactionState === 'ready'){
                // –£—Å–ø–µ—Ö!
                clearTimeout(reactionTimeout);
                const reactionTime = Date.now() - reactionStartTime;
                reactionState = 'idle';

                if(reactionTime < reactionBest){
                    reactionBest = reactionTime;
                    document.getElementById('reactionBest').textContent = reactionBest;
                }

                if(reactionTime < 350){
                    // –ë—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–∫—Ü–∏—è
                    reactionScore++;
                    document.getElementById('reactionScore').textContent = reactionScore;
                    btn.textContent = reactionTime + ' –º—Å!';
                    result.textContent = 'üî• –ë–´–°–¢–†–û! ' + (3-reactionScore) + ' –æ—Å—Ç–∞–ª–æ—Å—å';
                    result.className = 'reaction-result reaction-fast';
                    beep(600, 0.1, 'sine');
                    showText(window.innerWidth/2, window.innerHeight/2, '–ë–ê–ó–ê!');

                    if(reactionScore >= 3){
                        // –ü–æ–±–µ–¥–∞!
                        result.textContent = 'üéâ –†–ï–§–õ–ï–ö–°–´ –ù–ê –í–´–°–û–¢–ï!';
                        playWin();
                        rain(['‚ö°','üéØ','üî•']);
                        setTimeout(()=>{ goToStage(5); rain(['‚úÖ','‚≠ê']); }, 1500);
                    }else{
                        setTimeout(startReactionRound, 1500);
                    }
                }else{
                    // –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è
                    btn.textContent = reactionTime + ' –º—Å';
                    result.textContent = 'üêå –°–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω–æ! –ù—É–∂–Ω–æ < 350–º—Å';
                    result.className = 'reaction-result reaction-slow';
                    reactionScore = 0;
                    document.getElementById('reactionScore').textContent = '0';
                    playFail();
                    setTimeout(startReactionRound, 2000);
                }
            }
        };

        // ========== –ú–ò–ù–ò-–ò–ì–†–ê –ü–ê–ú–Ø–¢–¨ ==========
        window.startMemory = function(){
            audioCtx.resume();
            document.getElementById('startMemoryBtn').classList.add('hidden');
            memoryRound = 1;
            document.getElementById('memoryRound').textContent = '1';
            startMemoryRound();
        };

        function startMemoryRound(){
            memoryPlaying = true;
            memoryShowingSequence = true;
            memoryInput = [];

            const len = 3 + memoryRound; // 4, 5, 6
            document.getElementById('sequenceLen').textContent = len;

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
            memorySequence = [];
            for(let i = 0; i < len; i++){
                memorySequence.push(Math.floor(Math.random() * 5));
            }

            document.getElementById('memoryResult').textContent = 'üëÄ –°–ú–û–¢–†–ò –ò –ó–ê–ü–û–ú–ò–ù–ê–ô...';
            document.getElementById('memoryResult').className = 'reaction-result';

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
            const btns = document.querySelectorAll('.memory-btn');
            let i = 0;

            const showNext = ()=>{
                if(i < memorySequence.length){
                    const idx = memorySequence[i];
                    btns[idx].classList.add('flash');
                    playMemoryTone(idx);
                    setTimeout(()=>btns[idx].classList.remove('flash'), 350);
                    i++;
                    setTimeout(showNext, 600);
                }else{
                    memoryShowingSequence = false;
                    document.getElementById('memoryResult').textContent = 'üéÆ –¢–í–û–Ø –û–ß–ï–†–ï–î–¨!';
                }
            };

            setTimeout(showNext, 1000);
        }

        // –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–∞–º –ø–∞–º—è—Ç–∏
        document.querySelectorAll('.memory-btn').forEach(btn=>{
            btn.addEventListener('click', function(){
                if(!memoryPlaying || memoryShowingSequence) return;

                const color = parseInt(this.dataset.color);
                playMemoryTone(color);
                this.classList.add('flash');
                setTimeout(()=>this.classList.remove('flash'), 200);

                memoryInput.push(color);

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º
                const idx = memoryInput.length - 1;
                if(memoryInput[idx] !== memorySequence[idx]){
                    // –û—à–∏–±–∫–∞!
                    this.classList.add('wrong');
                    setTimeout(()=>this.classList.remove('wrong'), 500);
                    document.getElementById('memoryResult').textContent = 'üíÄ –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û! –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–Ω–æ–≤–æ...';
                    document.getElementById('memoryResult').className = 'reaction-result reaction-fail';
                    playFail(); shake();
                    showBigText('üíÄ –°–õ–ò–í üíÄ');
                    memoryRound = 1;
                    document.getElementById('memoryRound').textContent = '1';
                    setTimeout(startMemoryRound, 2000);
                    return;
                }

                this.classList.add('correct');
                setTimeout(()=>this.classList.remove('correct'), 200);

                if(memoryInput.length === memorySequence.length){
                    // –†–∞—É–Ω–¥ –ø—Ä–æ–π–¥–µ–Ω!
                    document.getElementById('memoryResult').textContent = '‚úÖ –†–ê–£–ù–î ' + memoryRound + ' –ü–†–û–ô–î–ï–ù!';
                    document.getElementById('memoryResult').className = 'reaction-result reaction-fast';
                    beep(600, 0.1, 'sine');
                    showText(window.innerWidth/2, window.innerHeight/2, '–ë–ê–ó–ê!');

                    if(memoryRound >= 3){
                        // –ü–æ–±–µ–¥–∞!
                        playWin();
                        rain(['üß†','üí°','üî•']);
                        setTimeout(()=>{ goToStage(7); rain(['‚úÖ','‚≠ê']); }, 1500);
                    }else{
                        memoryRound++;
                        document.getElementById('memoryRound').textContent = memoryRound;
                        setTimeout(startMemoryRound, 1500);
                    }
                }
            });
        });

        // ========== –•–ê–†–î–ö–û–† –ú–ò–ù–ò-–ò–ì–†–ê –í–ò–†–£–°–´ ==========
        function resetGame(){
            gameActive=false;
            virusCount=0;combo=1;wave=1;timeLeft=18;
            document.getElementById('virusCount').textContent='0';
            document.getElementById('comboCount').textContent='x1';
            document.getElementById('waveNum').textContent='1';
            document.getElementById('gameTimer').textContent='18.0';
            document.getElementById('gameTimer').parentElement.classList.remove('timer-critical');
            document.getElementById('progressFill').style.width='0%';
            document.getElementById('gameArea').innerHTML='';
            document.getElementById('startGameBtn').classList.remove('hidden');
            if(gameTimer)clearInterval(gameTimer);
        }

        window.startGame=function(){
            if(gameActive)return;
            gameActive=true;
            audioCtx.resume();
            document.getElementById('startGameBtn').classList.add('hidden');
            virusCount=0;combo=1;wave=1;timeLeft=18;lastKill=Date.now();

            gameTimer=setInterval(()=>{
                timeLeft-=0.1;
                document.getElementById('gameTimer').textContent=timeLeft.toFixed(1);
                if(timeLeft<=5)document.getElementById('gameTimer').parentElement.classList.add('timer-critical');
                if(timeLeft<=0){
                    clearInterval(gameTimer);
                    gameActive=false;
                    document.getElementById('gameArea').innerHTML='';
                    showBigText('üíÄ –°–õ–ò–í üíÄ<br><span style="font-size:0.8rem">–ö–†–ò–í–´–ï –†–£–ö–ò!</span>');
                    playGameOver();shake();
                    setTimeout(resetGame,2000);
                }
            },100);

            spawnVirus();
            setTimeout(spawnVirus,300);
        };

        function spawnVirus(){
            if(!gameActive||virusCount>=20)return;

            if(virusCount>=20){
                clearInterval(gameTimer);
                gameActive=false;
                playWin();shake();
                showBigText('üî• –ü–û–ë–ï–î–ê! üî•');
                setTimeout(()=>{goToStage(6);rain(['ü¶†','üíÄ','‚úÖ','üõ°Ô∏è','üî•']);},1000);
                return;
            }

            const area=document.getElementById('gameArea');
            const v=document.createElement('div');
            v.className='click-target';

            const size=40+Math.random()*40;
            const emojis=['ü¶†','üëæ','üíÄ','‚ò†Ô∏è','ü§°','üòà','üí©','üëΩ','üéÉ','ü§ñ'];
            v.textContent=emojis[Math.floor(Math.random()*emojis.length)];
            v.style.width=size+'px';
            v.style.height=size+'px';
            v.style.fontSize=(size*0.6)+'px';
            v.style.background=`radial-gradient(circle,hsl(${Math.random()*60},100%,50%),hsl(${Math.random()*60+300},100%,30%))`;

            const maxX=area.clientWidth-size,maxY=area.clientHeight-size;
            v.style.left=Math.random()*maxX+'px';
            v.style.top=Math.random()*maxY+'px';

            v.onclick=function(){
                if(!gameActive)return;

                const now=Date.now();
                if(now-lastKill<600){
                    combo=Math.min(combo+1,15);
                    if(combo>=3)playCombo();
                }else combo=1;
                lastKill=now;

                document.getElementById('comboCount').textContent='x'+combo;
                virusCount++;
                document.getElementById('virusCount').textContent=virusCount;
                document.getElementById('progressFill').style.width=(virusCount/20*100)+'%';

                if(virusCount===7){wave=2;document.getElementById('waveNum').textContent='2';}
                if(virusCount===14){wave=3;document.getElementById('waveNum').textContent='3';}

                const r=this.getBoundingClientRect();
                const texts=['üíÄ','üî•','–ë–ê–ó–ê!','–û–†–£!','x'+combo];
                showText(r.left,r.top,texts[Math.floor(Math.random()*texts.length)]);
                playKill();

                if(virusCount>=20){
                    this.classList.add('final-virus');
                    shake();playSuccess();
                    rain(['üí•','üî•','üíÄ','üéâ']);
                    clearInterval(gameTimer);
                    gameActive=false;
                    setTimeout(()=>{goToStage(6);rain(['‚úÖ','üõ°Ô∏è','üóø']);},800);
                }else{
                    this.remove();
                    const delay=wave===1?200:wave===2?120:80;
                    setTimeout(spawnVirus,delay);
                    if(wave>=2&&Math.random()>0.5)setTimeout(spawnVirus,delay+50);
                    if(wave>=3&&Math.random()>0.6)setTimeout(spawnVirus,delay+100);
                }
            };

            area.appendChild(v);

            const disappear=wave===1?1200:wave===2?900:700;
            setTimeout(()=>{
                if(v.parentNode&&gameActive&&virusCount<20){
                    v.remove();
                    combo=1;
                    document.getElementById('comboCount').textContent='x1';
                    spawnVirus();
                }
            },disappear);
        }

        document.addEventListener('keypress',e=>{
            if(e.key==='Enter'){
                const active=document.querySelector('.stage.active');
                if(!active)return;
                const id=active.id;
                if(id==='stage0')checkNick();
                else if(id.startsWith('stage')&&!['stage4','stage5','stage6','stage11'].includes(id)){
                    const n=parseInt(id.replace('stage',''));
                    if(n>=1&&n<=10)checkAnswer(n);
                }
            }
        });

        updateIndicators();

        console.log('%cüîí –°–¢–û–ô! –û–¢–í–ï–¢–´ –ó–ê–®–ò–§–†–û–í–ê–ù–´! üîí','font-size:18px;color:#ff0000;font-weight:bold;');
        console.log('%cüóø –õ–µ–≥–µ–Ω–¥–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Å—Ç–Ω–æ!','font-size:12px;color:#ff00ff;');
    })();
    </script>
</body>
</html>